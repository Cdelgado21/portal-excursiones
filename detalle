<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle de Cotizaci√≥n</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f0f7f7; margin: 0; padding: 0; }
    header { background-color: #02535a; color: white; padding: 1rem; text-align: center; }
    header h1 { font-size: 1.6rem; color: #f5e2b8; }
    .tabs { display: flex; flex-wrap: wrap; justify-content: center; background-color: #02535a; }
    .tab { padding: 10px 20px; cursor: pointer; color: white; border-bottom: 3px solid transparent; }
    .tab.active { background-color: #f49859; font-weight: bold; border-bottom: 3px solid #fff; }
    .section { display: none; padding: 20px; background: white; }
    .section.active { display: block; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, textarea, select { width: 100%; padding: 8px; margin-top: 4px; border: 1px solid #ccc; border-radius: 5px; }
    .buttons { margin-top: 30px; text-align: center; }
    .buttons button { background-color: #02535a; color: white; padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    table td, table th { border: 1px solid #ccc; padding: 8px; text-align: left; }
    table th { background-color: #f49859; color: white; }
    #edicionManual { text-align: center; color: #f49859; font-weight: bold; margin-top: 10px; }
    textarea#incluye, textarea#politicas { min-height: 200px; resize: vertical; }
  </style>
</head>
<body>
  <header>
    <h1 id="tituloCotizacion">Detalle de Cotizaci√≥n</h1>
  </header>
  <div class="tabs">
    <div class="tab active" data-tab="viaje">Informaci√≥n del viaje</div>
    <div class="tab" data-tab="vuelos">Itinerario de vuelos</div>
    <div class="tab" data-tab="hospedaje">Hospedaje</div>
    <div class="tab" data-tab="incluye">Lo que incluye / No incluye</div>
    <div class="tab" data-tab="itinerario">Itinerario de tours</div>
    <div class="tab" data-tab="opcionales">Tours opcionales</div>
    <div class="tab" data-tab="precios">Precios</div>
    <div class="tab" data-tab="politicas">Pol√≠ticas</div>
  </div>

  <div class="section active" id="viaje">
    <label>Destino</label>
    <input id="destino">
    <button onclick="cargarDatosDelDestino(document.getElementById('destino').value)">üîÑ Cargar info del destino</button>
  </div>

  <div class="section" id="incluye">
    <label>Lo que incluye</label>
    <textarea id="incluye"></textarea>
    <label>Lo que no incluye</label>
    <textarea id="no_incluye"></textarea>
  </div>

  <div class="section" id="itinerario">
    <label>Itinerario por d√≠as</label>
    <textarea id="itinerario_tours"></textarea>
  </div>

  <div class="section" id="opcionales">
    <label>Tours opcionales</label>
    <textarea id="tours_opcionales"></textarea>
  </div>

  <div class="section" id="politicas">
    <label>Pol√≠ticas y condiciones</label>
    <textarea id="politicas"></textarea>
  </div>

  <div class="buttons">
    <button onclick="descargarPDF()">Descargar PDF</button>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDUEZgkW-3HbZu2BLej4v0mbDHZf2vRo8",
      authDomain: "tours-460717.firebaseapp.com",
      projectId: "tours-460717"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function cargarDatosDelDestino(nombreDestino) {
      const snapshot = await db.collection("tours").where("nombre", "==", nombreDestino.trim()).get();
      if (snapshot.empty) {
        alert("Destino no encontrado");
        return;
      }
      const tour = snapshot.docs[0].data();
      document.getElementById("incluye").value = tour.incluye || '';
      document.getElementById("no_incluye").value = tour.no_incluye || '';
      document.getElementById("itinerario_tours").value = tour.itinerario_tours || '';
      document.getElementById("tours_opcionales").value = tour.tours_opcionales || '';
      document.getElementById("politicas").value = tour.politicas || '';
    }

    document.querySelectorAll(".tab").forEach(tab => {
      tab.addEventListener("click", () => {
        document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
        document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
        tab.classList.add("active");
        document.getElementById(tab.getAttribute("data-tab")).classList.add("active");
      });
    });
  </script>
</body>
</html>
